#!/bin/bash

echo "Timer started. Press Ctrl+C to stop."
echo ""

# Store the start time
start_time=$(date +%s)

# Function to format time
format_time() {
    local elapsed=$1
    local hours=$((elapsed / 3600))
    local minutes=$(( (elapsed % 3600) / 60 ))
    local seconds=$((elapsed % 60))
    printf "%02d:%02d:%02d" $hours $minutes $seconds
}

# Function to handle exit
cleanup() {
    local current_time=$(date +%s)
    local elapsed_seconds=$((current_time - start_time))
    local formatted_time=$(format_time $elapsed_seconds)
    echo -e "\n\nTimer stopped. Total elapsed time: $formatted_time"
    exit 0
}

# Register the cleanup function for Ctrl+C
trap cleanup INT

# Loop to update the timer display
while true; do
    current_time=$(date +%s)
    elapsed_seconds=$((current_time - start_time))
    formatted_time=$(format_time $elapsed_seconds)
    
    # Clear the previous line and display the updated time
    printf "\rElapsed time: %s" "$formatted_time"
    sleep 1
done
